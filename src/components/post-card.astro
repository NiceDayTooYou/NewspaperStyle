---
import type { CollectionEntry } from 'astro:content';
import { Calendar, Clock } from 'lucide-preact';
import { twJoin } from 'tailwind-merge';
import Date from './date.astro';

type Props = { post: CollectionEntry<'posts'> };

const { post } = Astro.props;
const { remarkPluginFrontmatter } = await post.render();
---

<a
  href={`/blog/${post.slug}`}
  aria-label={`${post.data.title}. ${post.data.description}`}
  class={twJoin(
    'group flex h-full flex-col gap-1 rounded-md bg-2 p-4 shadow',
    'hover:bg-3 motion-safe:transition-colors',
  )}
>
  <span class="group-hover:text-brand motion-safe:transition-colors">{post.data.title}</span>
  <p class="text-xs font-1 text-2">{post.data.description}</p>
  <div class="mt-auto flex items-center gap-6 pt-4 text-xs font-1 text-2">
    <div class="flex items-center gap-2">
      <Calendar class="h-4 w-4" aria-hidden />
      <Date>{post.data.published}</Date>
    </div>
    <div class="flex items-center gap-2">
      <Clock class="h-4 w-4" aria-hidden />
      <span>{remarkPluginFrontmatter.readingTime} Min Read</span>
    </div>
  </div>
</a>
